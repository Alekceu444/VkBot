# VkBot

# Описание
   Бот сообщества для вконтакте на Java. Бот отвечает на сообщения группы. Так же отвечает на упоминания в беседах, в которые он включен. И отвечает на коментарии на стене группы в которых присутствует обращение к сообществу. Во всех вышеперечисленных случаях бот цитирует отправленное ему сообщение.

# Конфигурация
Для работы бота, в конфигурационном файле application.properties необходимо указать следующие параметры:
  - **server.port**
    	Порт для сервера spring boot.
  - **token** 
	    Ключ доступа сообщества для бота. Необходим ключ с правом доступа к сообщениям сообщества и стене. [Как его получить](https://vk.com/dev/bizmessages_doc?f=1.1.%20%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%BB%D1%8E%D1%87%D0%B0%20%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0%20%D0%B2%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D1%85%20%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%B0) .
  - **api.version**
	    Версия используемого Callback [API](https://vk.com/dev/versions) . 
  - **api.confirmation**
	    Код для подтверждения адреса [сервера](https://vk.com/dev/callback_api?f=1.%20%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20Callback%20API) .

### Запуск
Необходим внешний http адрес для локальной машины. Для этого можно использовать [ngrok](https://ngrok.com/)

- Запустить ngrok (https://dashboard.ngrok.com/get-started/setup) указав в команде "ngrok http" порт из параметра server.port
- Скопировать адрес сервера из ngrok и вставить в адрес сервера [CallbackAPI](https://vk.com/dev/callback_api?f=1.%20%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20Callback%20API). Пример:
```
    http://24d093bada93.ngrok.io 
``` 
- Команда для запуска в Windows из папки проекта
```
    .\mvnw.cmd spring-boot:run
```
- Команда для запуска в Linux
```
    mvnw spring-boot:run
```
- В панели управления сообщества подтвердить указанный адрес. И включить типы событий: 
	- Сообщения - Входящее сообщение
	- Записи на стене - Добавление
	- Комментарии на стене - Добавление
